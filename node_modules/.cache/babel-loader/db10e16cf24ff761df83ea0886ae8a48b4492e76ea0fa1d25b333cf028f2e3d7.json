{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"box1\"\n};\nconst _hoisted_2 = {\n  class: \"host\"\n};\nconst _hoisted_3 = {\n  class: \"label\"\n};\nconst _hoisted_4 = {\n  class: \"address\"\n};\nconst _hoisted_5 = {\n  class: \"label\"\n};\nconst _hoisted_6 = {\n  class: \"btn\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_divider = _resolveComponent(\"van-divider\");\n  const _component_van_icon = _resolveComponent(\"van-icon\");\n  const _component_van_space = _resolveComponent(\"van-space\");\n  const _component_van_button = _resolveComponent(\"van-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_divider, null, {\n    default: _withCtx(() => [_createTextVNode(\"分发票权\")]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_van_space, null, {\n    default: _withCtx(() => [_createElementVNode(\"p\", _hoisted_3, [_createVNode(_component_van_icon, {\n      name: \"manager\"\n    }), _createTextVNode(\"主持人地址\")]), _createElementVNode(\"p\", _hoisted_4, _toDisplayString($setup.host), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", null, [_createVNode(_component_van_space, null, {\n    default: _withCtx(() => [_createElementVNode(\"p\", _hoisted_5, [_createVNode(_component_van_icon, {\n      name: \"friends-o\"\n    }), _createTextVNode(\"投票人地址\")]), _withDirectives(_createElementVNode(\"textarea\", {\n      class: \"votors\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.voterAddress = $event)\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.voterAddress]])]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_van_button, {\n    block: \"\",\n    onClick: $setup.mandate\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"开始分发选票\")]),\n    _: 1 /* STABLE */\n  })])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_van_divider","default","_withCtx","_createTextVNode","_","_createElementVNode","_hoisted_2","_component_van_space","_hoisted_3","_component_van_icon","name","_hoisted_4","_toDisplayString","$setup","host","_hoisted_5","_cache","$event","voterAddress","_hoisted_6","_component_van_button","block","onClick","mandate"],"sources":["D:\\a\\wallet-demo\\web3-vote\\src\\views\\MandateView.vue"],"sourcesContent":["<script setup>\nimport useWeb3 from \"../hooks/useWeb3\";\nimport { ref, onMounted } from \"vue\";\nconst { web3, voteContract, getAccount } = useWeb3();\n\n// 定义主持人信息\nconst host = ref(\"\");\n\n// 获取主持人信息\nconst getHost = async () => {\n  host.value = await voteContract.methods.host().call();\n};\n\n// 选民地址\nconst voterAddress = ref(\"\");\n\n// 分发票权\nconst mandate = async () => {\n  const arr = eval(voterAddress.value);\n  const account = await getAccount();\n  voteContract.methods\n    .mandate(arr)\n    .send({ from: account })\n    .on(\"receipt\", () => {\n      console.log(\"选票分发成功\");\n    });\n};\n\nonMounted(async () => {\n  await getHost();\n});\n/*\n  0x62815B4970983B8C58C2Fb649B6ba78b5BA05f70\n  0xe4525BF45E1b1Cf46A136171BD51e63f4256a0DF\n  0xE251ddBe6191594922bfd3d338529EC9C613eB67\n  0xC76E9893BB9a75730Fc61d0169241fD80AD644f6\n  [\"0xe4525BF45E1b1Cf46A136171BD51e63f4256a0DF\",\"0xE251ddBe6191594922bfd3d338529EC9C613eB67\",\"0xC76E9893BB9a75730Fc61d0169241fD80AD644f6\"]\n*/\n</script>\n\n<template>\n  <div class=\"box1\">\n    <van-divider>分发票权</van-divider>\n    <div class=\"host\">\n      <van-space>\n        <p class=\"label\"><van-icon name=\"manager\" />主持人地址</p>\n        <p class=\"address\">{{ host }}</p>\n      </van-space>\n    </div>\n    <div>\n      <van-space>\n        <p class=\"label\"><van-icon name=\"friends-o\" />投票人地址</p>\n        <textarea class=\"votors\" v-model=\"voterAddress\"></textarea>\n      </van-space>\n    </div>\n    <div class=\"btn\">\n      <van-button block @click=\"mandate\">开始分发选票</van-button>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\"></style>\n"],"mappings":";;EAyCOA,KAAK,EAAC;AAAM;;EAEVA,KAAK,EAAC;AAAM;;EAEVA,KAAK,EAAC;AAAO;;EACbA,KAAK,EAAC;AAAS;;EAKfA,KAAK,EAAC;AAAO;;EAIfA,KAAK,EAAC;AAAK;;;;;;uBAdlBC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJC,YAAA,CAA+BC,sBAAA;IA1CnCC,OAAA,EAAAC,QAAA,CA0CiB,MAAI,CA1CrBC,gBAAA,CA0CiB,MAAI,E;IA1CrBC,CAAA;MA2CIC,mBAAA,CAKM,OALNC,UAKM,GAJJP,YAAA,CAGYQ,oBAAA;IA/ClBN,OAAA,EAAAC,QAAA,CA6CQ,MAAqD,CAArDG,mBAAA,CAAqD,KAArDG,UAAqD,GAApCT,YAAA,CAA2BU,mBAAA;MAAjBC,IAAI,EAAC;IAAS,IA7CjDP,gBAAA,CA6CoD,OAAK,E,GACjDE,mBAAA,CAAiC,KAAjCM,UAAiC,EAAAC,gBAAA,CAAXC,MAAA,CAAAC,IAAI,iB;IA9ClCV,CAAA;QAiDIC,mBAAA,CAKM,cAJJN,YAAA,CAGYQ,oBAAA;IArDlBN,OAAA,EAAAC,QAAA,CAmDQ,MAAuD,CAAvDG,mBAAA,CAAuD,KAAvDU,UAAuD,GAAtChB,YAAA,CAA6BU,mBAAA;MAAnBC,IAAI,EAAC;IAAW,IAnDnDP,gBAAA,CAmDsD,OAAK,E,mBACnDE,mBAAA,CAA2D;MAAjDT,KAAK,EAAC,QAAQ;MApDhC,uBAAAoB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAoD0CJ,MAAA,CAAAK,YAAY,GAAAD,MAAA;mDAAZJ,MAAA,CAAAK,YAAY,E;IApDtDd,CAAA;QAuDIC,mBAAA,CAEM,OAFNc,UAEM,GADJpB,YAAA,CAAsDqB,qBAAA;IAA1CC,KAAK,EAAL,EAAK;IAAEC,OAAK,EAAET,MAAA,CAAAU;;IAxDhCtB,OAAA,EAAAC,QAAA,CAwDyC,MAAM,CAxD/CC,gBAAA,CAwDyC,QAAM,E;IAxD/CC,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}